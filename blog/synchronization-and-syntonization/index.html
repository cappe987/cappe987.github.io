<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Synchronization and Syntonization &#183; Casper Andersson</title><meta name=title content="Synchronization and Syntonization &#183; Casper Andersson"><meta name=description content="Aligning and keeping clocks aligned"><meta name=keywords content="networks,linux,"><link rel=canonical href=https://casan.se/blog/synchronization-and-syntonization/><link type=text/css rel=stylesheet href=/css/main.bundle.min.0fde03143f6751d812e3fcb96ba666ae5d971e8228048ccffb8cd28cfed85545a0699f072731a33db6cb5e683d3f8f97ba1eca745e145fb464451622812c8c95.css integrity="sha512-D94DFD9nUdgS4/y5a6Zmrl2XHoIoBIzP+4zSjP7YVUWgaZ8HJzGjPbbLXmg9P4+Xuh7KdF4UX7RkRRYigSyMlQ=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.911bd9741247c092f3a38757ca26b07e6bf319209e5162bbc5a609bae50fa2ea13b3c09f8f2c3d1cfd66c0b6885f0b2137bb43fee6404db177d90abde3c09547.js integrity="sha512-kRvZdBJHwJLzo4dXyiawfmvzGSCeUWK7xaYJuuUPouoTs8Cfjyw9HP1mwLaIXwshN7tD/uZATbF32Qq948CVRw==" data-copy data-copied></script>
<script src=/js/zoom.min.js></script>
<link rel=icon type=image/svg href=/favicon.svg><link rel=manifest href=/site.webmanifest><meta property="og:title" content="Synchronization and Syntonization"><meta property="og:description" content="Aligning and keeping clocks aligned"><meta property="og:type" content="article"><meta property="og:url" content="https://casan.se/blog/synchronization-and-syntonization/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2023-07-10T00:00:00+00:00"><meta property="article:modified_time" content="2023-07-10T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Synchronization and Syntonization"><meta name=twitter:description content="Aligning and keeping clocks aligned"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Blog","name":"Synchronization and Syntonization","headline":"Synchronization and Syntonization","description":"Aligning and keeping clocks aligned","abstract":"Setting two clocks to the same time doesn\u0026rsquo;t seem that hard, right? If same-second precision is enough for you then you can usually do that. But when we are talking nanosecond precision like that provided by PTP (IEEE1588, Precision Time Protocol) there are some more variables to consider.\nSynchronization # The first variable to note is the time it takes to set the new time.","inLanguage":"en","url":"https:\/\/casan.se\/blog\/synchronization-and-syntonization\/","author":{"@type":"Person","name":"Casper Andersson"},"copyrightYear":"2023","dateCreated":"2023-07-10T00:00:00\u002b00:00","datePublished":"2023-07-10T00:00:00\u002b00:00","dateModified":"2023-07-10T00:00:00\u002b00:00","keywords":["networks","linux"],"mainEntityOfPage":"true","wordCount":"830"}]</script><meta name=author content="Casper Andersson"><link href=https://github.com/cappe987 rel=me><script src=/lib/jquery/jquery.slim.min.js integrity></script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 pl-[24px] pr-[24px]" style=z-index:100><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div><div class="relative max-w-[64rem] ml-auto mr-auto"><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div><a href=/ class=flex><span class=sr-only>Casper Andersson</span>
<img src=/img/ghost.png width=245 height=245 class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt="Casper Andersson"></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Casper Andersson</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><a href=/blog/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Blog>Blog</p></a><a href=/docs/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Documentation>Docs</p></a><a href=/tags/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Tags>Tags</p></a><a href=/about/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title="About Me">About Me</p></a></nav><div class="flex md:hidden items-center space-x-5 md:ml-12"><span></span></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-auto overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/blog/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Blog>Blog</p></a></li><li class=mt-1><a href=/docs/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Documentation>Docs</p></a></li><li class=mt-1><a href=/tags/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Tags>Tags</p></a></li><li class=mt-1><a href=/about/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="About Me">About Me</p></a></li></ul></div></label></div></div></div></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("menu-blur");n.style.opacity=t/300})</script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/img/bg6_hu917d3663dd0ee4c1b9afd519cbf0a754_418075_1200x0_resize_q75_box.jpg)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><header id=single_header class="mt-5 max-w-prose"><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>Casper Andersson</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/blog/>Blog</a><span class="px-1 text-primary-500">/</span></li><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/blog/synchronization-and-syntonization/>Synchronization and Syntonization</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">Synchronization and Syntonization</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2023-07-10 00:00:00 +0000 UTC">10 July 2023</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">4 mins</span></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/networks/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">networks</span></span></span>
<span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/linux/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">linux</span></span></span></div></div><div class=flex><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt="Casper Andersson" src=/img/ghost_hua467e0f5394043115cc2fd743cdf1bb4_14575_192x192_fill_box_center_3.png><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Casper Andersson</div><div class="text-sm text-neutral-700 dark:text-neutral-400">I&rsquo;m a software developer</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/cappe987 target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first sm:max-w-prose lg:ml-auto px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#synchronization>Synchronization</a></li><li><a href=#syntonization>Syntonization</a></li><li><a href=#holdover>Holdover</a></li><li><a href=#physical-hardware-clock>Physical Hardware Clock</a><ul><li><a href=#set-time>Set time</a></li><li><a href=#get-time>Get time</a></li><li><a href=#adjust-time>Adjust time</a></li><li><a href=#set-frequency>Set frequency</a></li></ul></li><li><a href=#time-scales-and-leap-seconds>Time scales and leap seconds</a></li></ul></nav></div></details><details class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#synchronization>Synchronization</a></li><li><a href=#syntonization>Syntonization</a></li><li><a href=#holdover>Holdover</a></li><li><a href=#physical-hardware-clock>Physical Hardware Clock</a><ul><li><a href=#set-time>Set time</a></li><li><a href=#get-time>Get time</a></li><li><a href=#adjust-time>Adjust time</a></li><li><a href=#set-frequency>Set frequency</a></li></ul></li><li><a href=#time-scales-and-leap-seconds>Time scales and leap seconds</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><p>Setting two clocks to the same time doesn&rsquo;t seem that hard, right? If
same-second precision is enough for you then you can usually do that. But when
we are talking nanosecond precision like that provided by PTP (IEEE1588,
Precision Time Protocol) there are some more variables to consider.</p><div id=synchronization class=anchor></div><h2 class="relative group">Synchronization
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#synchronization aria-label=Anchor>#</a></span></h2><p>The first variable to note is the time it takes to set the new time. Even if the
action to set the time is triggered at the exact same time, the OS will
introduce latency in the operation. Anything that depends on the OS being
precise in its operations is out of the question. For this reason the
adjustments should be done through adjustments rather than setting an absolute
time. By knowing the difference between two clocks the time can be adjusted by
that much to synchronize them. Doing this with PTP is explained in <a href=https://casan.se/blog/ptp-and-timestamping-methods/>this
post</a>.</p><p>Assuming the initial difference calculated is precise then this will bring the time
difference hopefully within maybe a microsecond.</p><div id=syntonization class=anchor></div><h2 class="relative group">Syntonization
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#syntonization aria-label=Anchor>#</a></span></h2><p>Now that the clocks are nearly aligned we need to consider the frequency of the
oscillators driving the clocks. If two clocks driven by oscillators
at different frequencies, or even just of different qualities, it will result in
wander. A big difference will allow significant wander in between every
synchronization, resulting in never reaching near-perfect accuracy. When the
clocks are within a certain threshold time adjustment can stop and clock
syntonization starts. The slave clocks will adjust their operating frequency.
Though not literally the frequency, but rather a compensation value the clock
will take into account when advancing its time. The frequency is adjusted so
the time difference between the clocks approaches 0. If the slave time is behind
it needs to increase the frequency gradually until it catches up, at which point
it will start fluctuating back and fourth just around the frequency of the
master.</p><div id=holdover class=anchor></div><h2 class="relative group">Holdover
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#holdover aria-label=Anchor>#</a></span></h2><p>Clock holdover time is how long it can stay within a certain offset from the
master after losing the synchronization (e.g. losing connection). A typical
requirement is that it should keep some accuracy during 5 seconds loss. In terms
of PTP this may happen if its master clock goes down and it needs to find an new
master. And during those 5 seconds while waiting for a new master it cannot
wander too far away from the initial time.</p><div id=physical-hardware-clock class=anchor></div><h2 class="relative group">Physical Hardware Clock
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#physical-hardware-clock aria-label=Anchor>#</a></span></h2><p>When requiring nanosecond-precision timekeeping a hardware clock is used. In
Linux this is referred to as a Physical Hardware Clock (PHC). It keeps the time
and allows some operations to manage it.</p><ol><li>Set time</li><li>Get time</li><li>Adjust time</li><li>Set frequency</li></ol><p>Points 1) and 2) are not required by PTP, but are useful for debugging. 3) is
the one that is used to adjust for the difference. 4) sets the frequency of the
PHC. These operations can be accessed using the <code>phc_ctl</code> tool from the Linuxptp
project (along with some more operations).</p><p>In Linux the PHC are exposed as devices under <code>/dev</code>, typically as <code>/dev/ptpN</code>,
where <code>N</code> denotes the number of the PHC.</p><div id=set-time class=anchor></div><h3 class="relative group">Set time
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#set-time aria-label=Anchor>#</a></span></h3><p>The time set is an absolute value in Unix time. Meaning a value of 10 sets the
time to 1970-01-01 00:00:10.</p><pre tabindex=0><code>phc_ctl /dev/ptp0 set 10
</code></pre><div id=get-time class=anchor></div><h3 class="relative group">Get time
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#get-time aria-label=Anchor>#</a></span></h3><p>Reads out the time</p><pre tabindex=0><code>phc_ctl /dev/ptp0 get
</code></pre><div id=adjust-time class=anchor></div><h3 class="relative group">Adjust time
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#adjust-time aria-label=Anchor>#</a></span></h3><p>Increments or decrements the clock by the given time in seconds, read as double
precision floating point values.</p><pre tabindex=0><code>phc_ctl /dev/ptp0 adj 10.5
</code></pre><div id=set-frequency class=anchor></div><h3 class="relative group">Set frequency
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#set-frequency aria-label=Anchor>#</a></span></h3><p>Sets the frequency of the clock in ppb (parts-per-billion), meaning how many
nanoseconds per second it should it should stray from its real frequency. Note
that each PHC has different maximum frequency adjustments. The PHC capabilities
can be viewed with <code>phc_ctl /dev/ptp0</code>.</p><pre tabindex=0><code>phc_ctl /dev/ptp0 freq 1222
</code></pre><div id=time-scales-and-leap-seconds class=anchor></div><h2 class="relative group">Time scales and leap seconds
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#time-scales-and-leap-seconds aria-label=Anchor>#</a></span></h2><p>International Atomic Time (TAI) operates based on a weighted average of over 450
atomic clocks spread out around earth. Universal Coordinated Time (UTC) is based
on the actual earths rotation. In TAI a day is defined as having exactly 86 400
seconds, while UTC is subject to leap seconds. Leap seconds occur due to earths
rotation speed always changing slightly due to geological or climatic changes,
e.g. the continental plates moving or the ice caps melting. Since this cannot be
predicted over longer periods a leap second is only announced 6 months in
advance.</p><p>The leap seconds always happen on either June 30th or December 31st at 23:59:59.
A leap second ahead is shown as 23:59:60, before advancing to 00:00:00. A leap
second backwards goes directly from 23:59:58 to 00:00:00. As for when a leap
second occurs, a Linux system should be informed by an NTP daemon when when is
scheduled, which in turn gets its time through NTP from a more authoritative
clock device.</p><p>PTP operates on the TAI timescale, but always informs of the current UTC offset
(37 at the time of writing) to make sure any devices that need the time in UTC
can convert to it.</p></br></br></div><script>var oid="views_blog/networks/2023-07-10-ptp-syntonization-synchronization.md",oid_likes="likes_blog/networks/2023-07-10-ptp-syntonization-synchronization.md"</script><script type=text/javascript src=/js/page.min.0e49973b4ad0a382c7c6012d8bff8226316642daabc4f8a20477bd08674f3da6e2fa993bc20ad4f51e7c5bb68e6f913a207a7c4fe37ea0e7b806894afce0a64e.js integrity="sha512-DkmXO0rQo4LHxgEti/+CJjFmQtqrxPiiBHe9CGdPPabi+pk7wgrU9R58W7aOb5E6IHp8T+N+oOe4BolK/OCmTg=="></script></section><footer class="pt-8 max-w-prose print:hidden"></footer></article></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2023
Casper Andersson</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a></p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.35c1113bcc16c5a59bf031082f9e63822aa95280423881a7847a7ff33a16e6299ce6a840d9ef4e10d947e030a18f3f20359afb2ec0f35967484b9a9360ac3145.js integrity="sha512-NcERO8wWxaWb8DEIL55jgiqpUoBCOIGnhHp/8zoW5imc5qhA2e9OENlH4DChjz8gNZr7LsDzWWdIS5qTYKwxRQ=="></script></footer></div></body></html>