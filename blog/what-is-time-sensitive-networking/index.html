<!doctype html><html lang=en dir=ltr class=scroll-smooth data-default-appearance=dark data-auto-appearance=false><head><meta charset=utf-8><meta http-equiv=content-language content="en"><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>What is Time-Sensitive Networking? &#183; Casper Andersson</title><meta name=title content="What is Time-Sensitive Networking? &#183; Casper Andersson"><meta name=description content="An introduction to Time-Sensitive Networking and some of its techniques"><meta name=keywords content="networks,"><link rel=canonical href=https://casan.se/blog/what-is-time-sensitive-networking/><link type=text/css rel=stylesheet href=/css/main.bundle.min.0fde03143f6751d812e3fcb96ba666ae5d971e8228048ccffb8cd28cfed85545a0699f072731a33db6cb5e683d3f8f97ba1eca745e145fb464451622812c8c95.css integrity="sha512-D94DFD9nUdgS4/y5a6Zmrl2XHoIoBIzP+4zSjP7YVUWgaZ8HJzGjPbbLXmg9P4+Xuh7KdF4UX7RkRRYigSyMlQ=="><script type=text/javascript src=/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj+e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
<script defer type=text/javascript id=script-bundle src=/js/main.bundle.min.911bd9741247c092f3a38757ca26b07e6bf319209e5162bbc5a609bae50fa2ea13b3c09f8f2c3d1cfd66c0b6885f0b2137bb43fee6404db177d90abde3c09547.js integrity="sha512-kRvZdBJHwJLzo4dXyiawfmvzGSCeUWK7xaYJuuUPouoTs8Cfjyw9HP1mwLaIXwshN7tD/uZATbF32Qq948CVRw==" data-copy data-copied></script>
<script src=/js/zoom.min.js></script>
<link rel=icon type=image/svg href=/favicon.svg><link rel=manifest href=/site.webmanifest><meta property="og:title" content="What is Time-Sensitive Networking?"><meta property="og:description" content="An introduction to Time-Sensitive Networking and some of its techniques"><meta property="og:type" content="article"><meta property="og:url" content="https://casan.se/blog/what-is-time-sensitive-networking/"><meta property="article:section" content="blog"><meta property="article:published_time" content="2022-06-07T00:00:00+00:00"><meta property="article:modified_time" content="2022-06-07T00:00:00+00:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="What is Time-Sensitive Networking?"><meta name=twitter:description content="An introduction to Time-Sensitive Networking and some of its techniques"><script type=application/ld+json>[{"@context":"https://schema.org","@type":"Article","articleSection":"Blog","name":"What is Time-Sensitive Networking?","headline":"What is Time-Sensitive Networking?","description":"An introduction to Time-Sensitive Networking and some of its techniques","abstract":"Disclaimer! I am in no way an expert at this. I\u0026rsquo;m learning it as part of a research project at work. This will be the first post in what I hope to be a series of posts on TSN. What is it? # Time-Sensitive Networking (TSN) is a topic in the networking world where there exists data frames that absolutely must arrive within a limited time.","inLanguage":"en","url":"https:\/\/casan.se\/blog\/what-is-time-sensitive-networking\/","author":{"@type":"Person","name":"Casper Andersson"},"copyrightYear":"2022","dateCreated":"2022-06-07T00:00:00\u002b00:00","datePublished":"2022-06-07T00:00:00\u002b00:00","dateModified":"2022-06-07T00:00:00\u002b00:00","keywords":["networks"],"mainEntityOfPage":"true","wordCount":"1467"}]</script><meta name=author content="Casper Andersson"><link href=https://github.com/cappe987 rel=me><script src=/lib/jquery/jquery.slim.min.js integrity></script><meta name=theme-color></head><body class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32"><div id=the-top class="absolute flex self-center"><a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600" href=#main-content><span class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a></div><div class=min-h-[148px]></div><div class="fixed inset-x-0 pl-[24px] pr-[24px]" style=z-index:100><div id=menu-blur class="absolute opacity-0 inset-x-0 top-0 h-full single_hero_background nozoom backdrop-blur-2xl shadow-2xl"></div><div class="relative max-w-[64rem] ml-auto mr-auto"><div style=padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start space-x-3"><div><a href=/ class=flex><span class=sr-only>Casper Andersson</span>
<img src=/img/ghost.png width=245 height=245 class="logo max-h-[5rem] max-w-[5rem] object-scale-down object-left nozoom" alt="Casper Andersson"></a></div><div class="flex flex-1 items-center justify-between"><nav class="flex space-x-3"><a href=/ class="text-base font-medium text-gray-500 hover:text-gray-900">Casper Andersson</a></nav><nav class="hidden md:flex items-center space-x-5 md:ml-12 h-12"><a href=/blog/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Blog>Blog</p></a><a href=/docs/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Documentation>Docs</p></a><a href=/tags/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title=Tags>Tags</p></a><a href=/about/ class="flex items-center"><p class="text-base font-medium text-gray-500 hover:text-gray-900" title="About Me">About Me</p></a></nav><div class="flex md:hidden items-center space-x-5 md:ml-12"><span></span></div></div><div class="-my-2 -mr-2 md:hidden"><label id=menu-button for=menu-controller class=block><input type=checkbox id=menu-controller class=hidden><div class="cursor-pointer hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentcolor" d="M0 96C0 78.33 14.33 64 32 64H416c17.7.0 32 14.33 32 32 0 17.7-14.3 32-32 32H32C14.33 128 0 113.7.0 96zM0 256c0-17.7 14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32H32c-17.67.0-32-14.3-32-32zM416 448H32c-17.67.0-32-14.3-32-32s14.33-32 32-32H416c17.7.0 32 14.3 32 32s-14.3 32-32 32z"/></svg></span></div><div id=menu-wrapper style=padding-top:5px class="fixed inset-0 z-30 invisible w-screen h-screen m-auto overflow-auto transition-opacity opacity-0 cursor-default bg-neutral-100/50 backdrop-blur-sm dark:bg-neutral-900/50"><ul class="flex space-y-2 mt-3 flex-col items-end w-full px-6 py-6 mx-auto overflow-visible list-none ltr:text-right rtl:text-left max-w-7xl"><li><span class="cursor-pointer inline-block align-text-bottom hover:text-primary-600 dark:hover:text-primary-400"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512"><path fill="currentcolor" d="M310.6 361.4c12.5 12.5 12.5 32.75.0 45.25C304.4 412.9 296.2 416 288 416s-16.38-3.125-22.62-9.375L160 301.3 54.63 406.6C48.38 412.9 40.19 416 32 416S15.63 412.9 9.375 406.6c-12.5-12.5-12.5-32.75.0-45.25l105.4-105.4L9.375 150.6c-12.5-12.5-12.5-32.75.0-45.25s32.75-12.5 45.25.0L160 210.8l105.4-105.4c12.5-12.5 32.75-12.5 45.25.0s12.5 32.75.0 45.25l-105.4 105.4L310.6 361.4z"/></svg></span></span></li><li class=mt-1><a href=/blog/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Blog>Blog</p></a></li><li class=mt-1><a href=/docs/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Documentation>Docs</p></a></li><li class=mt-1><a href=/tags/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title=Tags>Tags</p></a></li><li class=mt-1><a href=/about/ class="flex items-center"><p class="text-bg font-bg text-gray-500 hover:text-gray-900" title="About Me">About Me</p></a></li></ul></div></label></div></div></div></div><script>window.addEventListener("scroll",function(){var t=window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,n=document.getElementById("menu-blur");n.style.opacity=t/300})</script><div class="relative flex flex-col grow"><main id=main-content class=grow><article><div class="fixed inset-x-0 top-0 h-[800px] single_hero_background nozoom" style=background-image:url(/img/bg6_hu917d3663dd0ee4c1b9afd519cbf0a754_418075_1200x0_resize_q75_box.jpg)><div class="absolute inset-0 bg-gradient-to-t from-neutral dark:from-neutral-800 to-transparent mix-blend-normal"></div><div class="absolute inset-0 opacity-60 bg-gradient-to-t from-neutral dark:from-neutral-800 to-neutral-100 dark:to-neutral-800 mix-blend-normal"></div></div><header id=single_header class="mt-5 max-w-prose"><ol class="text-sm text-neutral-500 dark:text-neutral-400 print:hidden"><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/>Casper Andersson</a><span class="px-1 text-primary-500">/</span></li><li class=inline><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/blog/>Blog</a><span class="px-1 text-primary-500">/</span></li><li class="inline hidden"><a class="hover:underline decoration-neutral-300 dark:underline-neutral-600" href=/blog/what-is-time-sensitive-networking/>What is Time-Sensitive Networking?</a><span class="px-1 text-primary-500">/</span></li></ol><h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">What is Time-Sensitive Networking?</h1><div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden"><div class="flex flex-row flex-wrap items-center"><time datetime="2022-06-07 00:00:00 +0000 UTC">7 June 2022</time><span class="px-2 text-primary-500">&#183;</span><span title="Reading time">7 mins</span></div><div class="flex flex-row flex-wrap items-center"><span style=margin-top:.5rem class=mr-2 onclick='window.open("/tags/networks/","_self")'><span class=flex><span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">networks</span></span></span></div></div><div class=flex><img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width=96 height=96 alt="Casper Andersson" src=/img/ghost_hua467e0f5394043115cc2fd743cdf1bb4_14575_192x192_fill_box_center_3.png><div class=place-self-center><div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">Author</div><div class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">Casper Andersson</div><div class="text-sm text-neutral-700 dark:text-neutral-400">I&rsquo;m a software developer</div><div class="text-2xl sm:text-lg"><div class="flex flex-wrap text-neutral-400 dark:text-neutral-500"><a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href=https://github.com/cappe987 target=_blank aria-label=Github rel="me noopener noreferrer"><span class="inline-block align-text-bottom"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentcolor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6.0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6.0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3.0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1.0-6.2-.3-40.4-.3-61.4.0.0-70 15-84.7-29.8.0.0-11.4-29.1-27.8-36.6.0.0-22.9-15.7 1.6-15.4.0.0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5.0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9.0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4.0 33.7-.3 75.4-.3 83.6.0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6.0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9.0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg></span></span></a></div></div></div></div><div class=mb-5></div></header><section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row"><div class="order-first sm:max-w-prose lg:ml-auto px-0 lg:order-last lg:max-w-xs ltr:lg:pl-8 rtl:lg:pr-8"><div class="toc ltr:pl-5 rtl:pr-5 print:hidden lg:sticky lg:top-10"><details open class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 hidden lg:block"><summary class="block py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="min-w-[220px] py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#what-is-it>What is it?</a></li><li><a href=#tsn-techniques>TSN techniques</a><ul><li><a href=#strict-priority-8021q>Strict Priority (802.1Q)</a></li><li><a href=#time-aware-shaper-8021qbv>Time-Aware Shaper (802.1Qbv)</a></li><li><a href=#credit-based-shaper-8021qav>Credit-Based Shaper (802.1Qav)</a></li><li><a href=#frame-preemption-8021qbu>Frame Preemption (802.1Qbu)</a></li><li><a href=#frame-replication-and-elimination-for-reliability-8021cb>Frame Replication and Elimination for Reliability (802.1CB)</a></li></ul></li><li><a href=#tsn-today>TSN today</a></li></ul></nav></div></details><details class="mt-0 overflow-hidden rounded-lg ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 lg:hidden"><summary class="py-1 text-lg font-semibold cursor-pointer bg-neutral-100 text-neutral-800 ltr:-ml-5 ltr:pl-5 rtl:-mr-5 rtl:pr-5 dark:bg-neutral-700 dark:text-neutral-100 lg:hidden">Table of Contents</summary><div class="py-2 border-dotted border-neutral-300 ltr:-ml-5 ltr:border-l ltr:pl-5 rtl:-mr-5 rtl:border-r rtl:pr-5 dark:border-neutral-600"><nav id=TableOfContents><ul><li><a href=#what-is-it>What is it?</a></li><li><a href=#tsn-techniques>TSN techniques</a><ul><li><a href=#strict-priority-8021q>Strict Priority (802.1Q)</a></li><li><a href=#time-aware-shaper-8021qbv>Time-Aware Shaper (802.1Qbv)</a></li><li><a href=#credit-based-shaper-8021qav>Credit-Based Shaper (802.1Qav)</a></li><li><a href=#frame-preemption-8021qbu>Frame Preemption (802.1Qbu)</a></li><li><a href=#frame-replication-and-elimination-for-reliability-8021cb>Frame Replication and Elimination for Reliability (802.1CB)</a></li></ul></li><li><a href=#tsn-today>TSN today</a></li></ul></nav></div></details></div></div><div class="min-w-0 min-h-0 max-w-prose"><div class="flex px-4 py-3 rounded-md bg-primary-100 dark:bg-primary-900"><span class="text-primary-400 ltr:pr-3 rtl:pl-3 flex items-center"><span class="relative block icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentcolor" d="M506.3 417 293 53c-16.33-28-57.54-28-73.98.0l-213.2 364C-10.59 444.9 9.849 480 42.74 480h426.6c32.76.0 53.26-35 36.96-63zM232 168c0-13.25 10.75-24 24-24s24 10.8 24 24v128c0 13.25-10.75 24-23.1 24S232 309.3 232 296V168zm24 248c-17.36.0-31.44-14.08-31.44-31.44s14.07-31.44 31.44-31.44 31.44 14.08 31.44 31.44C287.4 401.9 273.4 416 256 416z"/></svg></span></span><span class=dark:text-neutral-300><strong>Disclaimer!</strong>
I am in no way an expert at this. I&rsquo;m learning it as part of a
research project at work. This will be the first post in what I hope to be a
series of posts on TSN.</span></div><div id=what-is-it class=anchor></div><h2 class="relative group">What is it?
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#what-is-it aria-label=Anchor>#</a></span></h2><p>Time-Sensitive Networking (TSN) is a topic in the networking world where there
exists data frames that absolutely must arrive within a limited time. It is a
fairly new topic and some of the techniques are not completely industry-tested
yet. It originates from the sound and video world where they have sound and
video that must arrive very quickly. It was originally called Audio Video
Bridging (AVB), but was renamed to Time-Sensitive Networking (TSN) in 2012.</p><p>It could be used at concerts, for example. The sound data must to travel from
the microphones to all the speakers, and maybe some cameras to stream to the
screen; and it all has to happen very quickly. Humans are very sensitive to
delays in sound and video when it doesn&rsquo;t match up with the reality. To make
this even more complex there is often other types of data travelling the network
as well. You could make the argument that the sound should use its own cables;
however, that is extra maintenance and requires a separate network to run on. It
is convenient to be able to use the same network for everything.</p><p>To work around this they have come up with several techniques for handling
Quality of Service (QoS) in networks. I will cover some QoS techniques now, and
future posts will go more in-depth on some of them. These are all defined in
IEEE standards.</p><div id=tsn-techniques class=anchor></div><h2 class="relative group">TSN techniques
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#tsn-techniques aria-label=Anchor>#</a></span></h2><div id=strict-priority-8021q class=anchor></div><h3 class="relative group">Strict Priority (802.1Q)
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#strict-priority-8021q aria-label=Anchor>#</a></span></h3><p>The most basic form of QoS. This, as well as several of the below techniques, are
based on the concept of multiple egress queues. Usually 8 of them. With 8 queues
you can do a 1-to-1 mapping from the Priority Code Point (PCP) in the VLAN tag.
There are some techniques to set the priority from software (see <code>man mqprio</code>).
In Linux, this is the <code>skb->priority</code> field. But when you use QoS you usually
want the frames to only pass through the hardware. There is currently only
support in the Linux kernel to set this for this for the DSCP field (<code>man dcb-app</code>), but hopefully we can get a proper way to set this for PCP as well. It
is already supported by a lot of the hardware. There are other ways to do this
in the hardware as well, but not all are ideal.</p><p>As for the algorithm itself, it is very simple. It transmits frames in order
of priority. When it starts transmitting a frames it picks from the highest
priority queue that is not empty. A lower priority queue will only transmit if
all higher priority queues are empty. Below is an illustration of 3 transmit
queues with frames A-H, where frames in queue 2 would have the highest
priority.</p><pre tabindex=0><code>Queue
    ----------------------
  0 -&gt;     [H] [G] [F] [D] -&gt;
    ----------------------
  1 -&gt;             [E] [C] -&gt;
    ----------------------
  2 -&gt;             [B] [A] -&gt;
    ----------------------
</code></pre><div id=time-aware-shaper-8021qbv class=anchor></div><h3 class="relative group">Time-Aware Shaper (802.1Qbv)
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#time-aware-shaper-8021qbv aria-label=Anchor>#</a></span></h3><p>This extends the Strict Priority algorithm by adding a time aspect to it and
splitting the time into several slots where different priorities are allowed to
send in each slot. For example, it could have 2 slots, one where only priority 7
(highest) is allowed to send, and another where priority 0-6 are allowed to
send. The time slots can be of different length. For the second slot there are 7
different priorities that can send, so between those it applies Strict Priority.</p><p>Time-Aware Shapers can run in software, but the benefit it gives is completely
lost. To be at all useful it needs to be offloaded to hardware, which also
requires a PTP hardware clock. On top of the clock itself it should also be time
synced to all other switches in the network. Otherwise, there is also very
little point in using it. If all switches are synced it will result in the same
priorities all being open at once in the network; ideally letting the frames
flow all the way to their destination without being interrupted by other
traffic. To put it simply, it can reserve bandwidth for the different
priorities and giving the network a deterministic behavior (at least for high
priorities), but of course this assumes you aren&rsquo;t overloading the network
itself. If you try to overload the link it will obviously drop and delay frames.</p><p>[Read more&mldr;]({% post_url networks/2022-08-25-time-aware-shaper %})</p><div id=credit-based-shaper-8021qav class=anchor></div><h3 class="relative group">Credit-Based Shaper (802.1Qav)
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#credit-based-shaper-8021qav aria-label=Anchor>#</a></span></h3><p>The original TSN technique that was invented for the purpose of audio and video.
It reduces the congestion in the network by evening out bursts. It is a form of
fair queueing. Like Strict Priority, this also uses multiple egress queues. Each
queue holds a credit score that goes up when a queue is not transmitting, and
down when it transmits. When the credit score goes negative it is not allowed to
transmit. By evening out the traffic to get rid of bursts the data can flow more
freely in the network. This is especially useful when there are many devices in
the network that may send bursts. If all send a burst at once it can result in
the queues filling up where the bursts meet.</p><div id=frame-preemption-8021qbu class=anchor></div><h3 class="relative group">Frame Preemption (802.1Qbu)
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#frame-preemption-8021qbu aria-label=Anchor>#</a></span></h3><p>Frame preemption is the only of the priority-based TSN techniques that
<strong>requires</strong> both ends of a link to support its protocol. The ones above can all
operate on a single switch, though ideally used in a network were all are
running the same technique. It also requires hardware support. With frame
preemption both sides work together to provide faster delivery speed. To begin,
we first have to define which priorities (queues) are to be considered
preemptible. This is done independently on each switch.</p><p>If a preemptible frame is currently being transmitted and an express
(non-preemptible) frame arrives to the queue it will almost immediately stop the
preemptible frame (it preempts it). To not have wasted all the work already
done sending the frame it appends a CRC32 checksum to the end of the partial
frame, as well as inverts the last 16 bits of the CRC value to distinguish a
partial frame from a regular frame. When that is done it can start sending the
express frame. The partial frame is stored in a separate buffer on the other
end and waits for the other half of its frame to arrive. The other half is sent
when no more express traffic is available to send.</p><div id=frame-replication-and-elimination-for-reliability-8021cb class=anchor></div><h3 class="relative group">Frame Replication and Elimination for Reliability (802.1CB)
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#frame-replication-and-elimination-for-reliability-8021cb aria-label=Anchor>#</a></span></h3><p>The final technique for this post is the only one not dependent on multiple
queues and priorities. Rather than providing fast delivery it is a form of
redundancy. The idea is that it duplicates frames and sends them different
paths in a ring or otherwise redundant topology. In the case of one switch
failing it doesn&rsquo;t even have to wait for the switches to learn the new path. The
frames are already on their way the other path as well. To not get duplicate
frames at the destination it eliminates any duplicates where they meet again,
ideally as close to the destination as possible; possibly even at the end
device. Same as frame preemption, this requires the mergeing device to also
support the protocol. The intermediary switches do not need to support it, they
just need to forward the frame.</p><p>Keeping track of duplicates in the merging device is done with the help of a
sequence number in the duplicated frames. This is called the R-tag and it has a
16-bits field to store the sequence number. The R-tag is then removed when a
frame arrives at the merging device, and any following frames with the same
sequence numbers are discarded.</p><p>In the case of multiple senders to the same merging device it can employ a
<em>stream identification function</em> to identify which data stream a frame belongs
to. Two frames can have the same sequence number but belong to different
streams, and we don&rsquo;t want one of those to be discarded because they are not the
same frame.</p><div id=tsn-today class=anchor></div><h2 class="relative group">TSN today
<span class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100"><a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700" style=text-decoration-line:none!important href=#tsn-today aria-label=Anchor>#</a></span></h2><p>TSN techniques are still considered fairly new and is not entirely
industry-proven. It is starting to appear more and more in factories with the
advent of Industry 4.0 and companies wanting to make their factories smart and
more modern. By using a single network for everything you simplify connections
and reduce the amount of cables. The time-sensitive aspect comes from, for
example, control systems that need to send instructions instantly other
machines. It has also gained traction in the automobile industry for use inside
cars to connect various smart devices such as cameras, sensors, control
devices, etc., with the main computers.</p></br></br></div><script>var oid="views_blog/networks/2022-06-07-tsn-intro.md",oid_likes="likes_blog/networks/2022-06-07-tsn-intro.md"</script><script type=text/javascript src=/js/page.min.0e49973b4ad0a382c7c6012d8bff8226316642daabc4f8a20477bd08674f3da6e2fa993bc20ad4f51e7c5bb68e6f913a207a7c4fe37ea0e7b806894afce0a64e.js integrity="sha512-DkmXO0rQo4LHxgEti/+CJjFmQtqrxPiiBHe9CGdPPabi+pk7wgrU9R58W7aOb5E6IHp8T+N+oOe4BolK/OCmTg=="></script></section><footer class="pt-8 max-w-prose print:hidden"></footer></article></main><footer id=site-footer class="py-10 print:hidden"><div class="flex items-center justify-between"><p class="text-sm text-neutral-500 dark:text-neutral-400">&copy;
2023
Casper Andersson</p><p class="text-xs text-neutral-500 dark:text-neutral-400">Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://gohugo.io/ target=_blank rel="noopener noreferrer">Hugo</a> & <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500" href=https://blowfish.page/ target=_blank rel="noopener noreferrer">Blowfish</a></p></div><script>mediumZoom(document.querySelectorAll("img:not(.nozoom)"),{margin:24,background:"rgba(0,0,0,0.5)",scrollOffset:0})</script><script type=text/javascript src=/js/process.min.35c1113bcc16c5a59bf031082f9e63822aa95280423881a7847a7ff33a16e6299ce6a840d9ef4e10d947e030a18f3f20359afb2ec0f35967484b9a9360ac3145.js integrity="sha512-NcERO8wWxaWb8DEIL55jgiqpUoBCOIGnhHp/8zoW5imc5qhA2e9OENlH4DChjz8gNZr7LsDzWWdIS5qTYKwxRQ=="></script></footer></div></body></html>